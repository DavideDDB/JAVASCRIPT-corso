<!DOCTYPE html>

<html leng="en">
    <head>
        <title>20 Promise</title>

    </head>
    <body>

        <script>
            
            //Funzione senza promises
            //
            // chooseTopping(function (toppings){
            //     placeOrder(toppings, function(order){
            //         collectOrder(order, function(pizza){
            //             eatPizza(pizza);
            //         }, failureCallback);
            //     }, failureCallback);
            // }, failureCallback);

            //funzione con promises
            //
            // chooseTopping()
            //     .then(function (toppings){
            //         return placeOrder(toppings);
            //     })
            //     .then(function (order) {
            //         return collectOrder(order);
            //     })
            //     .then(function (pizza){
            //         eatPizza(pizza);
            //     })
            //     .catch(failureCallback);

            //importare un immagine con promise
            //
            // fetch('coffee.jpg')
            //     .then(response => {
            //         if(!response.ok) {
            //             throw new Error(`HTTP error! status: ${response.status}`);
            //         }else{
            //             return response.blob();
            //         }
            //     })
            //     .then(myBlob => {
            //         let objectURL = URL.createObjectURL(myBlob);
            //         let image = document.createElement('img');
            //         image.src = objectURL;
            //         document.body.appendChild(image);
            //     })
            //     .catch(e => {
            //         console.log('There has been a problem with your fetch operation: ' + e.message);
            //     }); 
                
                

            //creare una Promise
            //
            // let timeoutPromise = new Promise((resolve, reject) =>{
            //     setTimeout(function (){
            //         resolve('Success!');
            //     }, 2000);
            // });


            //sintassi super basica di come creare una Promise
            //
            // let prova = new Promise((resolve, reject) =>{
            //     resolve();
            // });

            function timeoutPromise(message, interval) {
                return new Promise((resolve, reject) =>{
                    if(message === '' || typeof message !== 'string') {
                        reject(' Message is empty or not a string');
                    }else if (interval < 0 || typeof interval !=='number') {
                        reject('interval is negative or not a number');
                    }else {
                        setTimeout(function (){
                            resolve(message);
                        }, interval);
                    }
                });
            };

            timeoutPromise('Hello there!', 1000)
            .then(message => {
                alert(message);
            })
            .catch(e =>{
                console.log('Error'+ e);
            });

        </script>
    </body>
</html>